<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>JDBC | Sunbufu's blog</title><meta name=keywords content="java,,jdbc"><meta name=description content="JDBC"><meta name=author content="sunbufu"><link rel=canonical href=https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-jdbc/><link crossorigin=anonymous href=/assets/css/stylesheet.min.2d6dbfc6e0f8a1db1c9d082a76dc11d094328cf63f247bbc2421dfaa7f2bb170.css integrity="sha256-LW2/xuD4odscnQgqdtwR0JQyjPY/JHu8JCHfqn8rsXA=" rel="preload stylesheet" as=style><link rel=preload href=icon/favicon-152x152.png as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://sunbufu.netlify.app/icon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://sunbufu.netlify.app/icon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://sunbufu.netlify.app/icon/favicon-32x32.png><link rel=apple-touch-icon href=https://sunbufu.netlify.app/icon/apple-touch-icon.png><link rel=mask-icon href=https://sunbufu.netlify.app/icon/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-123-45','auto'),ga('send','pageview'))</script><meta property="og:title" content="JDBC"><meta property="og:description" content="JDBC"><meta property="og:type" content="article"><meta property="og:url" content="https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-jdbc/"><meta property="og:image" content="https://sunbufu.netlify.app/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-06-01T00:00:00+00:00"><meta property="article:modified_time" content="2018-06-01T00:00:00+00:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://sunbufu.netlify.app/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="JDBC"><meta name=twitter:description content="JDBC"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://sunbufu.netlify.app/posts/"},{"@type":"ListItem","position":2,"name":"JDBC","item":"https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-jdbc/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"JDBC","name":"JDBC","description":"JDBC","keywords":["java,","jdbc"],"articleBody":"一、什么是JDBC Java提出的一套用来连接数据库的标准（接口）。起到一种桥梁的作用。 1、JDBC的常用类  Java使用jdbc编程，必须使用：来自java.sql.*;的类和接口 java.sql.Driver;//所有数据库的驱动均实现该接口 java.sql.DriverManage;//驱动管理类 java.sql.Connection;//连接的接口 java.sql.statment;//会话的接口 java.sql.,Result;//结果集的接口  二、JDBC的使用步骤 1、加载驱动 Class.forName(\"包名\", \"类名\"); 2、获得链接 **url(同一资源定位器):**协议名：//主机名：端口号：资源名\nDriverManager.getConnection(\"url\", username, password); 3、创建会话 1)Statement Statement stm = con.createStatement(); 2)PreparedStatement(预编译的Statement) 可以预防SQL注入。\nPreparedStatement pstmt = con.prepareStatement(sql);//需要预先编译的sql语句 4、执行SQL，获取结果集 1)executeQuery(String sql) 执行SELECT语句，它返回的是查询后得到记录集（resultset）。\n2)executeUpdate(String sql) 执行UPDATE，INSERT，DELETE语句，它返回的是语句执行后说影响到的记录条数（int）。对于 CREATE TABLE 或 DROP TABLE 等不操作行的DDL语句，executeUpdate 的返回值总为零。\nResultSet rs = stm.executeQuery(sql); 3)execute(String sql) 执行任何sql语句，也就是前两者之一。返回值是第一个结果的表现形式。当第一个执行结果是查询语句时，返回true，可以通过getResultSet方法获取结果；当第一个执行结果是更新语句或DDL语句时，返回false，可以通过getUpdateCount方法获取更新的记录数量。\n4)executeBatch 批处理操作，在处理大量相同操作时可以明显提高效率。\ncon.setAutoCommit(false); // 关闭自动执行 stmt.addBatch(\"INSERT INTO employees VALUES (1000, 'Joe Jones')\"); stmt.addBatch(\"INSERT INTO departments VALUES (260, 'Shoe')\"); stmt.addBatch(\"INSERT INTO emp_dept VALUES (1000, 260)\"); int[] updateCounts = stmt.executeBatch();// 提交一批要执行的更新命令 5、处理结果（例如：遍历） while (rs.next()) { int deeptno = rs.getInt(1); String dname = rs.getString(2); String loc = rs.getString(3); System.out.println(deeptno + \"\\t\" + dname + \"\\t\" + loc); } 6、关闭 注意：如果忘记关闭连接是很危险的，有可能卡死数据库。\nfinally { if (rs != null) { try { rs.close(); } catch (SQLException e) { e.printStackTrace(); } } if (stm != null) { try { stm.close(); } catch (SQLException e) { e.printStackTrace(); } } if (con != null) { try { con.close(); } catch (SQLException e) { e.printStackTrace(); } } } 三、ProPerties容器 在java.util包下面有一个类 Properties，该类主要用于读取项目的配置文件（以．properties结尾的文件和.xml文件）。\nProperties有一个load()方法，可以直接读取InputStrem内的数据。将数据库的参数存放到Properties容器中{参数以键值对的方式存在}。\n//加载配置文件 roperties.load(DBUtil.class.getClassLoader().getResourceAsStream(\"DataBaseUtil.properties\")); //获取配置文件里的配置信息 datatype = properties.getProperty(\"datatype\"); driver = properties.getProperty(datatype + \"Driver\"); url = properties.getProperty(datatype + \"Url\"); user = properties.getProperty(datatype + \"User\"); password = properties.getProperty(datatype + \"Password\"); DataBaseUtil.properties 的内容如下：\ndatatype=mysql oracleDriver=oracle.jdbc.driver.OracleDriver oracleUrl=jdbc:oracle:thin:@localhost:1521:xe oracleUser=scott oraclePassword=tiger mysqlDriver=com.mysql.jdbc.Driver mysqlUrl=jdbc:mysql://localhost:3306/bjsxt20151014 mysqlUser=root mysqlPassword=123456 四、JDBC连接各种数据库的方式示例 1、Oracle // 1 oracle数据库(thin模式) Class.forName(\"oracle.jdbc.driver.OracleDriver\").newInstance(); String url = \"jdbc:oracle:thin:@localhost:1521:orcl\";// orcl为数据库的SID(实例) String user = \"scott\"; String password = \"tiger\"; Connection conn = DriverManager.getConnection(url, user, password); 2、DB2 // 2 DB2数据库 Class.forName(\"com.ibm.db2.jdbc.app.DB2Driver\").newInstance(); String url = \"jdbc:db2://localhost:5000/sample\";// sample为数据库名 String user = \"admin\"; String password = \"\"; Connection conn = DriverManager.getConnection(url, user, password); 3、SQL Server // 3 Sql Server数据库 Class.forName(\"com.microsoft.jdbc.sqlserver.SQLServerDriver\").newInstance(); String url = \"jdbc:microsoft:sqlserver://localhost:1433;DatabaseName=mydb\";// mydb为数据库 String user = \"sa\"; String password = \"\"; Connection conn = DriverManager.getConnection(url, user, password); 4、Sybase // 4 Sybase数据库 Class.forName(\"com.sybase.jdbc.SybDriver\").newInstance(); String url = \"jdbc:sybase:Tds:localhost:5007/myDB\";// myDB为数据库名 Properties sysProps = System.getProperties(); sysProps.put(\"user\", \"userid\"); sysProps.put(\"password\", \"user_password\"); Connection conn = DriverManager.getConnection(url, sysProps); 5、Informix // 5 Informix数据库 Class.forName(\"com.informix.jdbc.IfxDriver\").newInstance(); String url = \"jdbc:informix-sqli://123.45.67.89:1533/myDB:INFORMIXSERVER=myserver;user=testuser;password=testpassword\";//myDB为数据库名 Connection conn = DriverManager.getConnection(url); 6、MySQl // 6 MySQL数据库 Class.forName(\"com.mysql.jdbc.Driver\").newInstance();//或者为 Class.forName(\"org.gjt.mm.mysql.Driver\").newInstance(); tring url = \"jdbc:mysql://localhost/myDB\";// myDB为数据库名 String user = \"root\"; String password = \"123456\"; Connection conn = DriverManager.getConnection(url, user, password); 7、PostgreSQL // 7 PostgreSQL数据库 Class.forName(\"org.postgresql.Driver\").newInstance(); String url = \"jdbc:postgresql://localhost/myDB\";// myDB为数据库名 String user = \"myuser\"; String password = \"mypassword\"; Connection conn = DriverManager.getConnection(url, user, password); 8、SqlLite // 8 SqlLite数据库 Class.forName(\"org.sqlite.JDBC\"); String url = \"jdbc:sqlite:SqlLite.db\";// SqlLite.db为数据文件(*.db)的路径 Connection con = DriverManager.getConnection(url); ","wordCount":"374","inLanguage":"en","datePublished":"2018-06-01T00:00:00Z","dateModified":"2018-06-01T00:00:00Z","author":{"@type":"Person","name":"sunbufu"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-jdbc/"},"publisher":{"@type":"Organization","name":"Sunbufu's blog","logo":{"@type":"ImageObject","url":"https://sunbufu.netlify.app/icon/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://sunbufu.netlify.app/ accesskey=h title="Sunbufu's blog (Alt + H)">Sunbufu's blog</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://sunbufu.netlify.app/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://sunbufu.netlify.app/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://sunbufu.netlify.app/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://sunbufu.netlify.app/>Home</a>&nbsp;»&nbsp;<a href=https://sunbufu.netlify.app/posts/>Posts</a></div><h1 class=post-title>JDBC</h1><div class=post-description>JDBC</div><div class=post-meta>June 1, 2018&nbsp;·&nbsp;2 min&nbsp;·&nbsp;sunbufu</div></header><div class=post-content><h1 id=一什么是jdbc>一、什么是JDBC<a hidden class=anchor aria-hidden=true href=#一什么是jdbc>#</a></h1><p>Java提出的一套用来<strong>连接数据库的标准（接口）</strong>。起到一种桥梁的作用。
<img loading=lazy src=/posts/2018-and-before/20151026090321237.jpg alt=JDBC></p><h2 id=1jdbc的常用类>1、JDBC的常用类<a hidden class=anchor aria-hidden=true href=#1jdbc的常用类>#</a></h2><ul><li>Java使用jdbc编程，必须使用：来自<code>java.sql.*;</code>的类和接口</li><li><code>java.sql.Driver;</code>//所有数据库的驱动均实现该接口</li><li><code>java.sql.DriverManage;</code>//驱动管理类</li><li><code>java.sql.Connection;</code>//连接的接口</li><li><code>java.sql.statment;</code>//会话的接口</li><li><code>java.sql.,Result;</code>//结果集的接口</li></ul><h1 id=二jdbc的使用步骤>二、JDBC的使用步骤<a hidden class=anchor aria-hidden=true href=#二jdbc的使用步骤>#</a></h1><h2 id=1加载驱动>1、加载驱动<a hidden class=anchor aria-hidden=true href=#1加载驱动>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;包名&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;类名&#34;</span><span style=color:#f92672>);</span>
</code></pre></div><h2 id=2获得链接>2、获得链接<a hidden class=anchor aria-hidden=true href=#2获得链接>#</a></h2><p>**url(同一资源定位器):**协议名：//主机名：端口号：资源名</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;url&#34;</span><span style=color:#f92672>,</span> username<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=3创建会话>3、创建会话<a hidden class=anchor aria-hidden=true href=#3创建会话>#</a></h2><h3 id=1statement>1)Statement<a hidden class=anchor aria-hidden=true href=#1statement>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>Statement stm <span style=color:#f92672>=</span> con<span style=color:#f92672>.</span><span style=color:#a6e22e>createStatement</span><span style=color:#f92672>();</span>
</code></pre></div><h3 id=2preparedstatement预编译的statement>2)PreparedStatement(预编译的Statement)<a hidden class=anchor aria-hidden=true href=#2preparedstatement预编译的statement>#</a></h3><p>可以预防<strong>SQL注入</strong>。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>PreparedStatement pstmt <span style=color:#f92672>=</span> con<span style=color:#f92672>.</span><span style=color:#a6e22e>prepareStatement</span><span style=color:#f92672>(</span>sql<span style=color:#f92672>);</span><span style=color:#75715e>//需要预先编译的sql语句
</span></code></pre></div><h2 id=4执行sql获取结果集>4、执行SQL，获取结果集<a hidden class=anchor aria-hidden=true href=#4执行sql获取结果集>#</a></h2><h3 id=1executequerystring-sql>1)executeQuery(String sql)<a hidden class=anchor aria-hidden=true href=#1executequerystring-sql>#</a></h3><p>执行<code>SELECT</code>语句，它返回的是查询后得到记录集（resultset）。</p><h3 id=2executeupdatestring-sql>2)executeUpdate(String sql)<a hidden class=anchor aria-hidden=true href=#2executeupdatestring-sql>#</a></h3><p>执行<code>UPDATE</code>，<code>INSERT</code>，<code>DELETE</code>语句，它返回的是语句执行后说影响到的记录条数（int）。对于 CREATE TABLE 或 DROP TABLE 等不操作行的DDL语句，executeUpdate 的返回值总为零。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ResultSet rs <span style=color:#f92672>=</span> stm<span style=color:#f92672>.</span><span style=color:#a6e22e>executeQuery</span><span style=color:#f92672>(</span>sql<span style=color:#f92672>);</span>
</code></pre></div><h3 id=3executestring-sql>3)execute(String sql)<a hidden class=anchor aria-hidden=true href=#3executestring-sql>#</a></h3><p>执行任何sql语句，也就是前两者之一。返回值是第一个结果的表现形式。当第一个执行结果是查询语句时，返回true，可以通过getResultSet方法获取结果；当第一个执行结果是更新语句或DDL语句时，返回false，可以通过getUpdateCount方法获取更新的记录数量。</p><h3 id=4executebatch>4)executeBatch<a hidden class=anchor aria-hidden=true href=#4executebatch>#</a></h3><p>批处理操作，在处理大量相同操作时可以明显提高效率。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>con<span style=color:#f92672>.</span><span style=color:#a6e22e>setAutoCommit</span><span style=color:#f92672>(</span><span style=color:#66d9ef>false</span><span style=color:#f92672>);</span> <span style=color:#75715e>// 关闭自动执行 
</span><span style=color:#75715e></span>stmt<span style=color:#f92672>.</span><span style=color:#a6e22e>addBatch</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;INSERT INTO employees VALUES (1000, &#39;Joe Jones&#39;)&#34;</span><span style=color:#f92672>);</span> 
stmt<span style=color:#f92672>.</span><span style=color:#a6e22e>addBatch</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;INSERT INTO departments VALUES (260, &#39;Shoe&#39;)&#34;</span><span style=color:#f92672>);</span> 
stmt<span style=color:#f92672>.</span><span style=color:#a6e22e>addBatch</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;INSERT INTO emp_dept VALUES (1000, 260)&#34;</span><span style=color:#f92672>);</span> 
<span style=color:#66d9ef>int</span><span style=color:#f92672>[]</span> updateCounts <span style=color:#f92672>=</span> stmt<span style=color:#f92672>.</span><span style=color:#a6e22e>executeBatch</span><span style=color:#f92672>();</span><span style=color:#75715e>// 提交一批要执行的更新命令 
</span></code></pre></div><h2 id=5处理结果例如遍历>5、处理结果（例如：遍历）<a hidden class=anchor aria-hidden=true href=#5处理结果例如遍历>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>while</span> <span style=color:#f92672>(</span>rs<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>
	<span style=color:#66d9ef>int</span> deeptno <span style=color:#f92672>=</span> rs<span style=color:#f92672>.</span><span style=color:#a6e22e>getInt</span><span style=color:#f92672>(</span>1<span style=color:#f92672>);</span>
	String dname <span style=color:#f92672>=</span> rs<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span>2<span style=color:#f92672>);</span>
	String loc <span style=color:#f92672>=</span> rs<span style=color:#f92672>.</span><span style=color:#a6e22e>getString</span><span style=color:#f92672>(</span>3<span style=color:#f92672>);</span>
	System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>deeptno <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\t&#34;</span> <span style=color:#f92672>+</span> dname <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;\t&#34;</span> <span style=color:#f92672>+</span> loc<span style=color:#f92672>);</span>
<span style=color:#f92672>}</span>
</code></pre></div><h2 id=6关闭>6、关闭<a hidden class=anchor aria-hidden=true href=#6关闭>#</a></h2><p><strong>注意：<strong>如果忘记关闭连接是很</strong>危险</strong>的，有可能<strong>卡死</strong>数据库。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#66d9ef>finally</span> <span style=color:#f92672>{</span>
	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>rs <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
			rs<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>SQLException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>stm <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
			stm<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>SQLException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
	<span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>con <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
		<span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
			con<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>SQLException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
			e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
		<span style=color:#f92672>}</span>
	<span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>
</code></pre></div><h1 id=三properties容器>三、ProPerties容器<a hidden class=anchor aria-hidden=true href=#三properties容器>#</a></h1><p>在<code>java.util</code>包下面有一个类 <code>Properties</code>，该类主要用于<strong>读取项目的配置文件</strong>（以<code>．properties</code>结尾的文件和<code>.xml</code>文件）。<br><code>Properties</code>有一个<code>load()</code>方法，可以直接读取<code>InputStrem</code>内的数据。将数据库的参数存放到<code>Properties</code>容器中{参数以键值对的方式存在}。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>//加载配置文件
</span><span style=color:#75715e></span>roperties<span style=color:#f92672>.</span><span style=color:#a6e22e>load</span><span style=color:#f92672>(</span>DBUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getClassLoader</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResourceAsStream</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;DataBaseUtil.properties&#34;</span><span style=color:#f92672>));</span>
<span style=color:#75715e>//获取配置文件里的配置信息
</span><span style=color:#75715e></span>datatype <span style=color:#f92672>=</span> properties<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;datatype&#34;</span><span style=color:#f92672>);</span>
driver <span style=color:#f92672>=</span> properties<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>datatype <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;Driver&#34;</span><span style=color:#f92672>);</span>
url <span style=color:#f92672>=</span> properties<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>datatype <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;Url&#34;</span><span style=color:#f92672>);</span>
user <span style=color:#f92672>=</span> properties<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>datatype <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;User&#34;</span><span style=color:#f92672>);</span>
password <span style=color:#f92672>=</span> properties<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span>datatype <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;Password&#34;</span><span style=color:#f92672>);</span>
</code></pre></div><p>DataBaseUtil.properties 的内容如下：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>datatype=mysql
oracleDriver=oracle.jdbc.driver.OracleDriver
oracleUrl=jdbc:oracle:thin:@localhost:1521:xe
oracleUser=scott
oraclePassword=tiger
mysqlDriver=com.mysql.jdbc.Driver
mysqlUrl=jdbc:mysql://localhost:3306/bjsxt20151014
mysqlUser=root
mysqlPassword=123456
</code></pre></div><h1 id=四jdbc连接各种数据库的方式示例>四、JDBC连接各种数据库的方式示例<a hidden class=anchor aria-hidden=true href=#四jdbc连接各种数据库的方式示例>#</a></h1><h2 id=1oracle>1、Oracle<a hidden class=anchor aria-hidden=true href=#1oracle>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 1 oracle数据库(thin模式)
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;oracle.jdbc.driver.OracleDriver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:oracle:thin:@localhost:1521:orcl&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// orcl为数据库的SID(实例)
</span><span style=color:#75715e></span>String user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;scott&#34;</span><span style=color:#f92672>;</span>
String password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;tiger&#34;</span><span style=color:#f92672>;</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> user<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=2db2>2、DB2<a hidden class=anchor aria-hidden=true href=#2db2>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 2 DB2数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.ibm.db2.jdbc.app.DB2Driver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:db2://localhost:5000/sample&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// sample为数据库名
</span><span style=color:#75715e></span>String user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;admin&#34;</span><span style=color:#f92672>;</span>
String password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> user<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=3sql-server>3、SQL Server<a hidden class=anchor aria-hidden=true href=#3sql-server>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 3 Sql Server数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.microsoft.jdbc.sqlserver.SQLServerDriver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:microsoft:sqlserver://localhost:1433;DatabaseName=mydb&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// mydb为数据库
</span><span style=color:#75715e></span>String user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;sa&#34;</span><span style=color:#f92672>;</span>
String password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> user<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=4sybase>4、Sybase<a hidden class=anchor aria-hidden=true href=#4sybase>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 4 Sybase数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.sybase.jdbc.SybDriver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:sybase:Tds:localhost:5007/myDB&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// myDB为数据库名
</span><span style=color:#75715e></span>Properties sysProps <span style=color:#f92672>=</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperties</span><span style=color:#f92672>();</span>
sysProps<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;user&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;userid&#34;</span><span style=color:#f92672>);</span>
sysProps<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;password&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;user_password&#34;</span><span style=color:#f92672>);</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> sysProps<span style=color:#f92672>);</span>
</code></pre></div><h2 id=5informix>5、Informix<a hidden class=anchor aria-hidden=true href=#5informix>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 5 Informix数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.informix.jdbc.IfxDriver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:informix-sqli://123.45.67.89:1533/myDB:INFORMIXSERVER=myserver;user=testuser;password=testpassword&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>//myDB为数据库名
</span><span style=color:#75715e></span>Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>);</span>
</code></pre></div><h2 id=6mysql>6、MySQl<a hidden class=anchor aria-hidden=true href=#6mysql>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 6 MySQL数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;com.mysql.jdbc.Driver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span><span style=color:#75715e>//或者为
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.gjt.mm.mysql.Driver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
tring url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:mysql://localhost/myDB&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// myDB为数据库名
</span><span style=color:#75715e></span>String user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;root&#34;</span><span style=color:#f92672>;</span>
String password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;123456&#34;</span><span style=color:#f92672>;</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> user<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=7postgresql>7、PostgreSQL<a hidden class=anchor aria-hidden=true href=#7postgresql>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 7 PostgreSQL数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.postgresql.Driver&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:postgresql://localhost/myDB&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// myDB为数据库名
</span><span style=color:#75715e></span>String user <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;myuser&#34;</span><span style=color:#f92672>;</span>
String password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;mypassword&#34;</span><span style=color:#f92672>;</span>
Connection conn <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>,</span> user<span style=color:#f92672>,</span> password<span style=color:#f92672>);</span>
</code></pre></div><h2 id=8sqllite>8、SqlLite<a hidden class=anchor aria-hidden=true href=#8sqllite>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#75715e>// 8 SqlLite数据库
</span><span style=color:#75715e></span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;org.sqlite.JDBC&#34;</span><span style=color:#f92672>);</span>
String url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jdbc:sqlite:SqlLite.db&#34;</span><span style=color:#f92672>;</span><span style=color:#75715e>// SqlLite.db为数据文件(*.db)的路径
</span><span style=color:#75715e></span>Connection con <span style=color:#f92672>=</span> DriverManager<span style=color:#f92672>.</span><span style=color:#a6e22e>getConnection</span><span style=color:#f92672>(</span>url<span style=color:#f92672>);</span>
</code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://sunbufu.netlify.app/tags/java/>java</a></li></ul><nav class=paginav><a class=prev href=https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-javascript/><span class=title>« Prev Page</span><br><span>javascript</span></a>
<a class=next href=https://sunbufu.netlify.app/posts/2018-and-before/2018-06-01-s_markdowneditor/><span class=title>Next Page »</span><br><span>S_MarkDownEditor</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://sunbufu.netlify.app/>Sunbufu's blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>